(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(9990)}])},9990:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Y}});var t=r(4051),o=r.n(t),a=r(5893),s=r(6574),c=r(1889),u=r(4842),_=r(5152),m=r.n(_),l=s.Z.TabPane,d=m()(Promise.all([r.e(281),r.e(275),r.e(286)]).then(r.bind(r,2286)),{loadableGenerated:{webpack:function(){return[2286]}},ssr:!1});var f=function(e){var n=e.disabled,r=e.sourceCode,t=e.setSourceCode,o=e.activeTab,i=e.handleUserTabChange,_=e.myHeight,m=(0,a.jsxs)(c.Z,{disabled:n,onClick:function(){return i(o)},children:[(0,a.jsx)(u.Z,{})," Run"]});return(0,a.jsx)("div",{className:"card-container",style:{height:"100%"},children:(0,a.jsx)(s.Z,{tabBarExtraContent:m,style:{height:"100%"},children:(0,a.jsx)(l,{tab:"main.f90",style:{height:_},children:(0,a.jsx)(d,{sourceCode:r,setSourceCode:t})},"1")})})},p=r(7294),h=r(7132),x=r(5439);var g=function(e){var n=e.activeTab,r=e.output,t=e.handleUserTabChange,o=e.myHeight;return(0,a.jsxs)("div",{className:"card-container",children:[(0,a.jsx)(x.Z,{block:!0,style:{margin:"6px 0px 22px 0px"},options:["STDOUT","AST","ASR","WAT","CPP","PY"],value:n,onChange:function(e){return t(e)}}),(0,a.jsx)(c.Z,{onClick:function(){navigator.clipboard.writeText(r)},style:{position:"absolute",right:"40px",top:"80px"},children:(0,a.jsx)(h.Z,{})}),(0,a.jsx)("pre",{style:{margin:"0px",height:o,overflow:"scroll",border:"1px solid black"},children:(0,a.jsx)("div",{id:"outputBox",style:{minHeight:"100%",fontSize:"0.9em",padding:"10px"},dangerouslySetInnerHTML:{__html:r}})})]})},y=r(4298),b=r.n(y);function w(e,n,r,t,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void r(u)}s.done?n(c):Promise.resolve(c).then(t,o)}function v(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function i(e){w(a,t,o,i,s,"next",e)}function s(e){w(a,t,o,i,s,"throw",e)}i(void 0)}))}}function j(){return new Promise((function(e,n){Module.onRuntimeInitialized=function(){e({emit_ast_from_source:Module.cwrap("emit_ast_from_source","string",["string"]),emit_asr_from_source:Module.cwrap("emit_asr_from_source","string",["string"]),emit_wat_from_source:Module.cwrap("emit_wat_from_source","string",["string"]),emit_cpp_from_source:Module.cwrap("emit_cpp_from_source","string",["string"]),emit_py_from_source:Module.cwrap("emit_wat_from_source","string",["string"]),emit_wasm_from_source:Module.cwrap("emit_wasm_from_source","string",["string"])})}}))}function k(e,n,r,t){var o=function(e){return n.push(e.toString())},a=function(){t(n.join(" ")+"\n"),n.length=0};return{js:{memory:e,print_i32:o,print_i64:o,print_f32:o,print_f64:o,print_str:function(r,t){return n.push(new TextDecoder("utf8").decode(new Uint8Array(e.buffer,r,t)))},flush_buf:a,set_exit_code:function(e){return r.val=e},show_img:function(r,t,o){for(var i=new DataView(e.buffer,o,Int32Array.BYTES_PER_ELEMENT*r*t),s=new Int32Array(r*t),c=0;c<r*t;c++)s[c]=i.getInt32(c<<2,!0);var u=document.createElement("CANVAS");u.width=t,u.height=r;for(var _=u.getContext("2d"),m=_.createImageData(t,r),l=0;l<m.data.length;l+=4)m.data[l+0]=s[l>>2],m.data[l+1]=s[l>>2],m.data[l+2]=s[l>>2],m.data[l+3]=255;_.putImageData(m,0,0),n.push('<img alt="constructed image" src="'.concat(u.toDataURL("image/jpeg"),'" height="').concat(r,'" width="').concat(t,'" style="aspect-ratio: 1 / 1;"/>')),a()}}}}function T(e,n){return R.apply(this,arguments)}function R(){return(R=v(o().mark((function e(n,r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,WebAssembly.instantiate(n,r);case 3:t=e.sent,(0,t.instance.exports._lcompilers_main)(),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:return e.abrupt("return","Success");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function S(e,n){return A.apply(this,arguments)}function A(){return A=v(o().mark((function e(n,r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:t=e.sent,n.emit_ast_from_source=function(e){try{return t.emit_ast_from_source(e)}catch(n){return console.log(n),r(n+"\nERROR: AST could not be generated from the code"),0}},n.emit_asr_from_source=function(e){try{return t.emit_asr_from_source(e)}catch(n){return console.log(n),r(n+"\nERROR: ASR could not be generated from the code"),0}},n.emit_wat_from_source=function(e){try{return t.emit_wat_from_source(e)}catch(n){return console.log(n),r(n+"\nERROR: WAT could not be generated from the code"),0}},n.emit_cpp_from_source=function(e){try{return t.emit_cpp_from_source(e)}catch(n){return console.log(n),r(n+"\nERROR: CPP could not be generated from the code"),0}},n.emit_py_from_source=function(e){try{return t.emit_py_from_source(e)}catch(n){return console.log(n),r(n+"\nERROR: LLVM could not be generated from the code"),0}},n.compile_code=function(e){try{return t.emit_wasm_from_source(e)}catch(n){return console.log(n),r(n+"\nERROR: The code could not be compiled. Either there is a compile-time error or there is an issue at our end."),0}},n.execute_code=function(){var e=v(o().mark((function e(n,t){var a,i,s,c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={val:1},i=[],s=new WebAssembly.Memory({initial:100,maximum:100}),c=k(s,i,a,t),e.next=6,T(n,c);case 6:if(u=e.sent,0!=a.val){e.next=9;break}return e.abrupt("return",1);case 9:return console.log(u),r(u+"\nERROR: The code could not be executed. Either there is a runtime error or there is an issue at our end."),e.abrupt("return",0);case 12:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();case 10:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}var C=function(e){var n=e.moduleReady,r=e.setModuleReady,t=e.lfortran_funcs,i=e.openNotification,s=e.myPrint,c=e.handleUserTabChange,u=(0,p.useCallback)(v(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t,s);case 2:r(!0),i("LFortran Module Initialized!","bottomRight"),console.log("LFortran Module Initialized!"),c("STDOUT");case 6:case"end":return e.stop()}}),e)}))),[n]);return(0,a.jsx)("div",{children:(0,a.jsx)(b(),{src:"".concat("","/lfortran.js"),onLoad:u})})},E=r(6348),P=r(6226),M=r(1382),U=r(9614),O=r(888),Z=r(4431);function I(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function N(e,n,r,t,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void r(u)}s.done?n(c):Promise.resolve(c).then(t,o)}function D(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function i(e){N(a,t,o,i,s,"next",e)}function s(e){N(a,t,o,i,s,"throw",e)}i(void 0)}))}}function q(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return I(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,n)}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=new(r.n(Z)()),H=(0,a.jsx)(O.Z,{style:{fontSize:24},spin:!0}),z=function(e,n){U.Z.info({message:e,placement:n})},W={emit_ast_from_source:null,emit_asr_from_source:null,emit_wat_from_source:null,emit_wasm_from_source:null,emit_cpp_from_source:null,emit_py_from_source:null,compile_code:null,execute_code:null};function Y(){var e=(0,p.useState)(!1),n=e[0],r=e[1],t=(0,p.useState)("program mandelbrot\n    implicit none\n    integer  , parameter :: rk       = 8\n    integer  , parameter :: i_max    =  600\n    integer  , parameter :: j_max    =  450\n    integer  , parameter :: n_max    =  100\n    real (rk), parameter :: x_centre = -0.5_rk\n    real (rk), parameter :: y_centre =  0.0_rk\n    real (rk), parameter :: width    =  4.0_rk\n    real (rk), parameter :: height   =  3.0_rk\n    real (rk), parameter :: dx_di    =   width / i_max\n    real (rk), parameter :: dy_dj    = -height / j_max\n    real (rk), parameter :: x_offset = x_centre - 0.5_rk * (i_max + 1) * dx_di\n    real (rk), parameter :: y_offset = y_centre - 0.5_rk * (j_max + 1) * dy_dj\n    integer :: image(i_max, j_max)\n    integer :: image_t(j_max, i_max)\n    integer   :: i\n    integer   :: j\n    integer   :: n\n    real (rk) :: x\n    real (rk) :: y\n    real (rk) :: x_0\n    real (rk) :: y_0\n    real (rk) :: x_sqr\n    real (rk) :: y_sqr\n\n    do j = 1, j_max\n    y_0 = y_offset + dy_dj * j\n    do i = 1, i_max\n        x_0 = x_offset + dx_di * i\n        x = 0.0_rk\n        y = 0.0_rk\n        n = 0\n        do\n        x_sqr = x ** 2\n        y_sqr = y ** 2\n        if (x_sqr + y_sqr > 4.0_rk) then\n            image(i,j) = 255\n            exit\n        end if\n        if (n == n_max) then\n            image(i,j) = 0\n            exit\n        end if\n        y = y_0 + 2.0_rk * x * y\n        x = x_0 + x_sqr - y_sqr\n        n = n + 1\n        end do\n    end do\n    end do\n\n    ! print '(a)', 'P2'\n    ! print '(i0, 1x, i0)', i_max, j_max\n    ! print '(i0)', 255\n    ! do j = 1, 3\n    !   do i = 1, 3\n    !     print '(i0)', image(i,j)\n    !   end do\n    ! end do\n\n    do i = 1, i_max\n        do j = 1, j_max\n            image_t(j, i) = image(i, j)\n        end do\n    end do\n\n    print *, \"The result is as follows:\"\n    call show_img(j_max, i_max, image_t)\n\n    print *, \"Thank you! Hope you had fun!\"\n\n    interface\n        subroutine show_img(n, m, A) bind(c)\n        integer, intent(in) :: n, m\n        integer, intent(in) :: A(n,m)\n        end subroutine\n    end interface\nend program mandelbrot\n"),i=t[0],s=t[1],c=(0,p.useState)("STDOUT"),u=c[0],_=c[1],m=(0,p.useState)(""),l=m[0],d=m[1],h=(0,p.useState)("calc(100vh - 170px)"),x=h[0];h[1];function y(e){return b.apply(this,arguments)}function b(){return(b=D(o().mark((function e(n){var r,t,a,s,c,u,m,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("STDOUT"!=n){e.next=19;break}if(""!==i.trim()){e.next=5;break}return d("No Source Code to compile"),_(n),e.abrupt("return");case 5:if(!(r=W.compile_code(i))){e.next=17;break}if(t=q(r.split(",")),a=t[0],s=t.slice(1),"0"===a){e.next=12;break}d(L.ansi_to_html(s)),e.next=17;break;case 12:return c=[],e.next=15,W.execute_code(new Uint8Array(s),(function(e){return c.push(e)}));case 15:e.sent&&d(c.join(""));case 17:e.next=20;break;case 19:"AST"==n?(u=W.emit_ast_from_source(i))&&d(L.ansi_to_html(u)):"ASR"==n?(m=W.emit_asr_from_source(i))&&d(L.ansi_to_html(m)):"WAT"==n?(l=W.emit_wat_from_source(i))&&d(L.ansi_to_html(l)):"CPP"==n?(f=W.emit_cpp_from_source(i))&&d(L.ansi_to_html(f)):"PY"==n?d("Support for PY is not yet enabled"):(console.log("Unknown key:",n),d("Unknown key: "+n));case 20:_(n);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{moduleReady:n,setModuleReady:r,lfortran_funcs:W,openNotification:z,myPrint:d,handleUserTabChange:y}),(0,a.jsxs)(E.Z,{gutter:[16,16],children:[(0,a.jsx)(P.Z,{xs:{span:24},sm:{span:24},md:{span:12},children:(0,a.jsx)(f,{disabled:!n,sourceCode:i,setSourceCode:s,activeTab:u,handleUserTabChange:y,myHeight:x})}),(0,a.jsx)(P.Z,{xs:{span:24},sm:{span:24},md:{span:12},children:n?(0,a.jsx)(g,{activeTab:u,output:l,handleUserTabChange:y,myHeight:x}):(0,a.jsx)(M.Z,{style:{position:"relative",top:"50%",left:"50%"},indicator:H})})]})]})}}},function(e){e.O(0,[459,774,888,179],(function(){return n=5557,e(e.s=n);var n}));var n=e.O();_N_E=n}]);